version: '3.8'

services:
  web:
    build: .
    container_name: fastapi_todo_app
    # Map port 8000 on the host to port 8000 in the container
    ports:
      - "8000:8000"
    # Mount the current directory into the container for development (optional, but useful)
    # volumes:
    #   - .:/app
    #   - /app/todo_app.db # Ensure the database file persists outside the container if needed, 
                         # but for this simple SQLite setup, we let it live inside the container 
                         # or use a volume if persistence across restarts is critical.
    environment:
      # Example of setting environment variables (if we used them in auth.py)
      # SECRET_KEY: "YOUR_SUPER_SECRET_KEY_CHANGE_ME"
      PYTHONUNBUFFERED: 1
    restart: always
    command: gunicorn main:app --workers 4 --worker-class uvicorn.workers.UvicornWorker --bind 0.0.0.0:8000
```